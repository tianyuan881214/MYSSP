//>>built
define("yadaWight/restree",["dojo/_base/declare","dojo/data/ItemFileWriteStore","dojo/ready","dojo/dom","dijit/Tree","dijit/tree/ForestStoreModel","dijit/registry"],function(_1,_2,_3,_4,_5,_6,_7){return _1(null,{url:"",nid:"",showId:"",showUrl:"",parentId:"0",self:this,constructor:function(_8){_1.safeMixin(this,_8);this.getTree().startup();},set:function(_9,_a){this[_9]=_a;},get:function(_b){return this[_b];},getStore:function(){return new _2({url:this.url});},getModel:function(){return new _6({store:this.getStore(),query:{pmenuResId:this.parentId},rootId:"0",rootLabel:"主菜单",mayHaveChildren:function(_c){var _d="";dojo.xhrGet({url:"res/resIsLeaf_ajax.do?t="+new Date().getTime(),sync:true,content:{menuResId:_c.menuResId},load:function(_e){_d=_e;},error:function(_f){alert(_f);}});if(_d=="0"){return false;}return true;},getChildren:function(_10,_11,_12){if(_10.root==true){if(this.root.children){_11(this.root.children);}else{this.store.fetch({query:this.query,queryOptions:{cache:false},onComplete:dojo.hitch(this,function(_13){this.root.children=_13;_11(_13);}),onError:_12});}}else{var sx=_10.menuResId;this.store.fetch({query:{pmenuResId:sx.toString()},queryOptions:{cache:false},onComplete:dojo.hitch(this,function(_14){_10.children=_14;_11(_14);}),onError:_12});}}});},getTree:function(){var _15=this.showId;var _16=this.showUrl;return _5({model:this.getModel(),onClick:function(_17){if(_17.root==true){_7.byId(_15).set("href",_16+"&menuResId=&pmenuResId="+_17.id+"&time="+new Date().getTime());}else{_7.byId(_15).set("href",_16+"&menuResId="+_17.menuResId+"&pmenuResId="+_17.pmenuResId+"&time="+new Date().getTime());}},domNode:_4.byId(this.nid)});}});});